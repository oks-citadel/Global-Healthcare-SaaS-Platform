# ============================================
# Production Environment Values
# ============================================

global:
  environment: production
  region: us-east-1
  imageRegistry: unifiedhealthacr.azurecr.io

replicaCount:
  api: 5
  web: 5

image:
  api:
    tag: latest
  web:
    tag: latest

service:
  type: LoadBalancer
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "false"

ingress:
  annotations:
    nginx.ingress.kubernetes.io/rate-limit: "200"
    nginx.ingress.kubernetes.io/limit-rps: "50"
  hosts:
    - host: api.unifiedhealth.com
      paths:
        - path: /
          pathType: Prefix
          service: api
    - host: app.unifiedhealth.com
      paths:
        - path: /
          pathType: Prefix
          service: web
  tls:
    - secretName: unifiedhealth-prod-tls
      hosts:
        - api.unifiedhealth.com
        - app.unifiedhealth.com

resources:
  api:
    requests:
      cpu: 1000m
      memory: 1Gi
    limits:
      cpu: 4000m
      memory: 4Gi
  web:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi

autoscaling:
  enabled: true
  api:
    minReplicas: 5
    maxReplicas: 20
    targetCPUUtilizationPercentage: 60
    targetMemoryUtilizationPercentage: 70
  web:
    minReplicas: 5
    maxReplicas: 20
    targetCPUUtilizationPercentage: 60
    targetMemoryUtilizationPercentage: 70

env:
  api:
    NODE_ENV: production
    LOG_LEVEL: info
  web:
    NODE_ENV: production

configMaps:
  app:
    data:
      CORS_ORIGIN: "https://app.unifiedhealth.com"
      API_BASE_URL: "https://api.unifiedhealth.com"

database:
  external:
    host: unified-health-db-prod.postgres.database.azure.com

redis:
  external:
    host: unified-health-redis-prod.redis.cache.windows.net

podDisruptionBudget:
  enabled: true
  minAvailable: 2
