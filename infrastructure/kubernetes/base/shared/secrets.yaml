# ============================================
# IMPORTANT: This file defines ExternalSecret references ONLY
# ============================================
# DO NOT store actual secret values in this file.
# All secrets are managed via AWS Secrets Manager and injected via External Secrets Operator.
#
# This file is intentionally minimal - actual secrets are provisioned via:
# 1. AWS Secrets Manager (source of truth)
# 2. External Secrets Operator (syncs from AWS to K8s)
# 3. ExternalSecret resources (defined below)
#
# See: infrastructure/kubernetes/external-secrets/ for full configuration
# ============================================

---
# ExternalSecret for Database Credentials
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: database-credentials
  labels:
    app: healthcare-platform
    component: shared
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: database-credentials
    creationPolicy: Owner
  data:
    - secretKey: connection_string
      remoteRef:
        key: unified-health/database
        property: connection_string
    - secretKey: username
      remoteRef:
        key: unified-health/database
        property: username
    - secretKey: password
      remoteRef:
        key: unified-health/database
        property: password
---
# ExternalSecret for Redis Credentials
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: redis-credentials
  labels:
    app: healthcare-platform
    component: shared
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: redis-credentials
    creationPolicy: Owner
  data:
    - secretKey: connection_string
      remoteRef:
        key: unified-health/redis
        property: connection_string
    - secretKey: password
      remoteRef:
        key: unified-health/redis
        property: password
---
# ExternalSecret for API Secrets
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: api-secrets
  labels:
    app: api-gateway
    component: gateway
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: api-secrets
    creationPolicy: Owner
  data:
    - secretKey: jwt_secret
      remoteRef:
        key: unified-health/api
        property: jwt_secret
    - secretKey: api_key
      remoteRef:
        key: unified-health/api
        property: api_key
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/api
        property: encryption_key
---
# ExternalSecret for Telehealth Service
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: telehealth-secrets
  labels:
    app: telehealth-service
    component: core
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: telehealth-secrets
    creationPolicy: Owner
  data:
    - secretKey: video_api_key
      remoteRef:
        key: unified-health/telehealth
        property: video_api_key
    - secretKey: twilio_account_sid
      remoteRef:
        key: unified-health/telehealth
        property: twilio_account_sid
    - secretKey: twilio_auth_token
      remoteRef:
        key: unified-health/telehealth
        property: twilio_auth_token
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/telehealth
        property: encryption_key
---
# ExternalSecret for Mental Health Service
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: mental-health-secrets
  labels:
    app: mental-health-service
    component: specialized
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: mental-health-secrets
    creationPolicy: Owner
  data:
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/mental-health
        property: encryption_key
    - secretKey: phq9_scoring_key
      remoteRef:
        key: unified-health/mental-health
        property: phq9_scoring_key
    - secretKey: gad7_scoring_key
      remoteRef:
        key: unified-health/mental-health
        property: gad7_scoring_key
---
# ExternalSecret for Chronic Care Service
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: chronic-care-secrets
  labels:
    app: chronic-care-service
    component: specialized
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: chronic-care-secrets
    creationPolicy: Owner
  data:
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/chronic-care
        property: encryption_key
    - secretKey: iot_device_api_key
      remoteRef:
        key: unified-health/chronic-care
        property: iot_device_api_key
---
# ExternalSecret for Pharmacy Service
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: pharmacy-secrets
  labels:
    app: pharmacy-service
    component: integration
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: pharmacy-secrets
    creationPolicy: Owner
  data:
    - secretKey: pharmacy_api_key
      remoteRef:
        key: unified-health/pharmacy
        property: pharmacy_api_key
    - secretKey: drug_database_api_key
      remoteRef:
        key: unified-health/pharmacy
        property: drug_database_api_key
    - secretKey: payment_gateway_key
      remoteRef:
        key: unified-health/pharmacy
        property: payment_gateway_key
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/pharmacy
        property: encryption_key
---
# ExternalSecret for Laboratory Service
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: laboratory-secrets
  labels:
    app: laboratory-service
    component: integration
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: laboratory-secrets
    creationPolicy: Owner
  data:
    - secretKey: lab_api_key
      remoteRef:
        key: unified-health/laboratory
        property: lab_api_key
    - secretKey: hl7_integration_key
      remoteRef:
        key: unified-health/laboratory
        property: hl7_integration_key
    - secretKey: encryption_key
      remoteRef:
        key: unified-health/laboratory
        property: encryption_key
---
# ExternalSecret for TimeSeries Database
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: timeseries-credentials
  labels:
    app: healthcare-platform
    component: shared
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: ClusterSecretStore
  target:
    name: timeseries-credentials
    creationPolicy: Owner
  data:
    - secretKey: connection_string
      remoteRef:
        key: unified-health/timeseries
        property: connection_string
    - secretKey: username
      remoteRef:
        key: unified-health/timeseries
        property: username
    - secretKey: password
      remoteRef:
        key: unified-health/timeseries
        property: password
