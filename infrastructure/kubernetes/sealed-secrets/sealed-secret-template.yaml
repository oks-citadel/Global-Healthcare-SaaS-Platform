# ============================================
# Sealed Secret Template
# ============================================
# This is a TEMPLATE file showing the structure of a sealed secret.
# DO NOT use this directly - generate sealed secrets using kubeseal.
#
# To create a real sealed secret:
# 1. Create a regular secret YAML
# 2. Run: kubeseal --format=yaml < secret.yaml > sealed-secret.yaml
# 3. Apply: kubectl apply -f sealed-secret.yaml
#
# The encryptedData values below are PLACEHOLDERS and will not work.
# ============================================
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: database-credentials
  namespace: unified-health
  labels:
    app.kubernetes.io/name: database-credentials
    app.kubernetes.io/component: sealed-secret
  annotations:
    # Optional: Allow same secret to be unsealed in different namespaces
    # sealedsecrets.bitnami.com/cluster-wide: "true"
    #
    # Optional: Allow updating the secret without re-sealing
    # sealedsecrets.bitnami.com/managed: "true"
spec:
  encryptedData:
    # These are PLACEHOLDER values - generate real ones using kubeseal
    DB_USERNAME: AgXXXX...PLACEHOLDER...XXXX==
    DB_PASSWORD: AgXXXX...PLACEHOLDER...XXXX==
    DB_HOST: AgXXXX...PLACEHOLDER...XXXX==
    DB_PORT: AgXXXX...PLACEHOLDER...XXXX==
    DB_NAME: AgXXXX...PLACEHOLDER...XXXX==
    DATABASE_URL: AgXXXX...PLACEHOLDER...XXXX==
  template:
    type: Opaque
    metadata:
      name: database-credentials
      namespace: unified-health
      labels:
        app: unified-health
        component: database
---
# ============================================
# Example: How to generate this sealed secret
# ============================================
# Step 1: Create the raw secret
#
# kubectl create secret generic database-credentials \
#   --namespace=unified-health \
#   --from-literal=DB_USERNAME=unified_health \
#   --from-literal=DB_PASSWORD='your-secure-password-here' \
#   --from-literal=DB_HOST='aurora-cluster.xxxxx.rds.amazonaws.com' \
#   --from-literal=DB_PORT='5432' \
#   --from-literal=DB_NAME='unified_health' \
#   --from-literal=DATABASE_URL='postgresql://unified_health:password@aurora:5432/unified_health' \
#   --dry-run=client -o yaml > /tmp/db-secret.yaml
#
# Step 2: Seal the secret
#
# kubeseal --format=yaml < /tmp/db-secret.yaml > sealed-database-credentials.yaml
#
# Step 3: Clean up and apply
#
# rm /tmp/db-secret.yaml
# kubectl apply -f sealed-database-credentials.yaml
# ============================================
