---
# ============================================
# UnifiedHealth API - Production PDB Override
# Stricter availability requirements for production
# ============================================
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: unified-health-api-pdb-production
  namespace: unified-health-production
  labels:
    app: unified-health-api
    component: availability
    environment: production
spec:
  # Minimum 2 pods must be available in production
  minAvailable: 2

  selector:
    matchLabels:
      app: unified-health-api
      environment: production

  # Unhealthy pod eviction policy
  unhealthyPodEvictionPolicy: IfHealthyBudget

  # Maximum unavailable (alternative configuration)
  # maxUnavailable: 1
